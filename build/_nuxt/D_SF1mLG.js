import{_ as e}from"./CW0bt-Ac.js";import{_ as t,h as s,j as a,k as n,u as o,P as i,f as r,r as l,p as c,V as d,B as g,W as h,w as u,S as p,X as v,Y as m,Z as w,$ as C,a0 as f,t as k,l as _,m as x}from"./aVp2OMsq.js";import{u as M}from"./1CeR046t.js";import{a as y}from"./DjxEfnIg.js";const V={},j={class:"control-chat"},Z=[n("div",{class:"control-chat__container"},[n("img",{loading:"lazy",src:"data:image/svg+xml,%3csvg%20width='25'%20height='25'%20viewBox='0%200%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.5%2016.927C9.77081%2016.927%207.55206%2014.7083%207.55206%2011.9791V6.24992C7.55206%203.52075%209.77081%201.302%2012.5%201.302C15.2291%201.302%2017.4479%203.52075%2017.4479%206.24992V11.9791C17.4479%2014.7083%2015.2291%2016.927%2012.5%2016.927ZM12.5%202.8645C10.6354%202.8645%209.11456%204.38534%209.11456%206.24992V11.9791C9.11456%2013.8437%2010.6354%2015.3645%2012.5%2015.3645C14.3646%2015.3645%2015.8854%2013.8437%2015.8854%2011.9791V6.24992C15.8854%204.38534%2014.3646%202.8645%2012.5%202.8645Z'%20fill='%23667085'/%3e%3cpath%20d='M12.5%2020.5728C7.67708%2020.5728%203.75%2016.6458%203.75%2011.8228V10.052C3.75%209.62492%204.10417%209.27075%204.53125%209.27075C4.95833%209.27075%205.3125%209.62492%205.3125%2010.052V11.8228C5.3125%2015.7812%208.54167%2019.0103%2012.5%2019.0103C16.4583%2019.0103%2019.6875%2015.7812%2019.6875%2011.8228V10.052C19.6875%209.62492%2020.0417%209.27075%2020.4688%209.27075C20.8958%209.27075%2021.25%209.62492%2021.25%2010.052V11.8228C21.25%2016.6458%2017.3229%2020.5728%2012.5%2020.5728Z'%20fill='%23667085'/%3e%3cpath%20d='M13.9479%207.47917C13.8646%207.47917%2013.7708%207.46875%2013.6771%207.4375C12.9167%207.15625%2012.0833%207.15625%2011.3229%207.4375C10.9167%207.58333%2010.4688%207.375%2010.3229%206.96875C10.1771%206.5625%2010.3854%206.11458%2010.7917%205.96875C11.8958%205.57292%2013.1146%205.57292%2014.2188%205.96875C14.625%206.11458%2014.8333%206.5625%2014.6875%206.96875C14.5625%207.28125%2014.2604%207.47917%2013.9479%207.47917Z'%20fill='%23667085'/%3e%3cpath%20d='M13.3333%209.6875C13.2604%209.6875%2013.1979%209.67708%2013.125%209.65625C12.7083%209.54167%2012.2812%209.54167%2011.8646%209.65625C11.4479%209.77083%2011.0208%209.52083%2010.9062%209.10417C10.7917%208.69792%2011.0417%208.27083%2011.4583%208.15625C12.1354%207.96875%2012.8646%207.96875%2013.5417%208.15625C13.9583%208.27083%2014.2083%208.69792%2014.0937%209.11458C14%209.45833%2013.6771%209.6875%2013.3333%209.6875Z'%20fill='%23667085'/%3e%3cpath%20d='M12.5%2023.698C12.0729%2023.698%2011.7188%2023.3438%2011.7188%2022.9167V19.7917C11.7188%2019.3647%2012.0729%2019.0105%2012.5%2019.0105C12.9271%2019.0105%2013.2812%2019.3647%2013.2812%2019.7917V22.9167C13.2812%2023.3438%2012.9271%2023.698%2012.5%2023.698Z'%20fill='%23667085'/%3e%3c/svg%3e"}),n("img",{loading:"lazy",src:"data:image/svg+xml,%3csvg%20width='25'%20height='25'%20viewBox='0%200%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.4583%205.20825L6.24998%209.37492H2.08331V15.6249H6.24998L11.4583%2019.7916V5.20825Z'%20stroke='%23667085'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M19.8646%205.1355C21.8174%207.08891%2022.9144%209.73795%2022.9144%2012.5001C22.9144%2015.2622%2021.8174%2017.9113%2019.8646%2019.8647M16.1875%208.81258C17.1639%209.78929%2017.7124%2011.1138%2017.7124%2012.4949C17.7124%2013.8759%2017.1639%2015.2005%2016.1875%2016.1772'%20stroke='%23667085'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e"}),n("img",{loading:"lazy",src:"data:image/svg+xml,%3csvg%20width='19'%20height='19'%20viewBox='0%200%2019%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_214_127)'%3e%3cpath%20d='M18.2083%203.16675V7.91675H13.4583'%20stroke='%23667085'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.2212%2011.8749C15.7066%2013.3315%2014.7325%2014.5814%2013.4458%2015.4362C12.159%2016.2911%2010.6293%2016.7045%209.08707%2016.6143C7.54487%2016.5241%206.07378%2015.9351%204.89546%2014.936C3.71714%2013.937%202.89545%2012.5821%202.55419%2011.0754C2.21294%209.56872%202.37061%207.99195%203.00346%206.58269C3.63631%205.17343%204.71004%204.00803%206.06285%203.2621C7.41566%202.51617%208.97426%202.23013%2010.5038%202.44708C12.0333%202.66404%2013.4509%203.37222%2014.5429%204.46493L18.2083%207.9166'%20stroke='%23667085'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_214_127'%3e%3crect%20width='19'%20height='19'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"})],-1)];const b=t(V,[["render",function(e,t){return s(),a("div",j,Z)}]]),B={},I={class:"input-chat"},L={class:"input-chat__container"},P=n("input",{disabled:""},null,-1),T=n("img",{loading:"lazy",style:{flex:"1"},src:"data:image/svg+xml,%3csvg%20width='29'%20height='29'%20viewBox='0%200%2029%2029'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.04169%203.625L22.9584%2014.5L6.04169%2025.375V3.625Z'%20stroke='%23008B90'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e"},null,-1);const z=t(B,[["render",function(e,t){return s(),a("div",I,[n("div",L,[n("img",{loading:"lazy",src:"data:image/svg+xml,%3csvg%20width='53'%20height='53'%20viewBox='0%200%2053%2053'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_119_502)'%3e%3cpath%20d='M37.1642%2037.164C43.201%2031.1272%2043.201%2021.3396%2037.1642%2015.3028C31.1274%209.26592%2021.3397%209.26592%2015.3029%2015.3028C9.26607%2021.3396%209.26607%2031.1272%2015.3029%2037.164C21.3397%2043.2009%2031.1274%2043.2009%2037.1642%2037.164Z'%20stroke='%23C01919'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.8613%2021.8611L30.6058%2030.6056'%20stroke='%23C01919'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.8613%2030.6057L30.6058%2021.8612'%20stroke='%23C01919'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_119_502'%3e%3crect%20width='37.0998'%20height='37.0998'%20fill='white'%20transform='translate(0%2026.2334)%20rotate(-45)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",onClick:t[0]||(t[0]=t=>("navigateTo"in e?e.navigateTo:o(i))("/"))}),P,T])])}]]),A=r("message",(()=>{const e=l({content:[]});return{message:e,setMessage:t=>{var s,a;(null==(s=e.value)?void 0:s.content)||(e.value.content=[]),(null==(a=e.value)?void 0:a.content.length)<5?(e.value.content.unshift({name:t.name,answer:t.answer}),e.value.chatId=t.chatId??""):(e.value.content.splice(-1),e.value.content.unshift({name:t.name,answer:t.answer}),e.value.chatId=t.chatId??"")},resetData:()=>{e.value={content:[],chatId:""}}}}),{persist:{storage:c.localStorage}}),H={class:"main-page"},O={class:"layout"},$={class:"wrapper-img"},S=(e=>(_("data-v-8ae3bcef"),e=e(),x(),e))((()=>n("video",{class:"video-default",src:"https://hannover1.korenext.com/video/no_sound_extcrop.mp4",autoplay:"",loop:""},null,-1))),D=["src"],E={class:"content"},F={class:"content__message__item"},J={class:"msg"},N={class:"content__pending"},W=t({__name:"index",setup(t){const{ws:i}=M(),r=l(""),c=l(!1),_=A(),{start:x,stop:V,recognition:j}=y({continuous:!0});d((()=>{i.onmessage=e=>{r.value=e.data}}));const Z=l(),B=l(0),I=l(!1);g((()=>{Z.value.addEventListener("playing",(()=>{V()})),Z.value.addEventListener("pause",(()=>{x()}))}));const L=async(e,t)=>{V();const s={inputs:{chat_mode:"Conversating",environment_des:"a man wearing a brown suit."},query:e,response_mode:"blocking",conversation_id:t??"",user:"abc-123",files:[]};try{I.value=!0;const e=await $fetch("http://209.38.250.27/v1/chat-messages",{headers:{Authorization:"Bearer app-eeoA2WVkK0EJZDone7RFPg4w"},method:"POST",body:JSON.stringify(s)});_.setMessage({name:"bot",answer:e.answer,chatId:e.conversation_id})}catch(a){console.log(a)}finally{I.value=!1,x()}};return h((()=>{_.resetData(),V()})),u((()=>{(()=>{if(!j)return;const e=_.$state.message.chatId;j.onresult=t=>{let s="";for(let a=t.resultIndex;a<t.results.length;++a)t.results[a].isFinal?(s+=t.results[a][0].transcript,_.setMessage({name:"user",answer:s}),c.value=!0,L(s,e)):s+=t.results[a][0].transcript+"...",B.value=`Timestamp: ${performance.now()}`},c.value=!1})(),x()})),(t,i)=>{const l=e,c=b,d=z;return s(),a("main",H,[n("div",O,[p(l,{titleHeader:"AI CHATBOT AUTOMATON"}),n("div",$,[S,n("video",{ref_key:"videoChatBot",ref:Z,class:"video-real",src:o(r),autoplay:""},null,8,D)]),n("div",E,[(s(!0),a(v,null,m(o(_).$state.message.content,(e=>(s(),a("div",{class:f(["content__message",{"user-message":"user"===e.name,"bot-message":"bot"===e.name}]),key:e.answer},[n("div",F,[n("p",J,k(e.answer),1)])],2)))),128)),w(n("div",N,"Processing ...",512),[[C,o(I)]])]),p(c),p(d)])])}}},[["__scopeId","data-v-8ae3bcef"]]);export{W as default};
