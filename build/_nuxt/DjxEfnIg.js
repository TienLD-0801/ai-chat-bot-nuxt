import{u as e,q as n,s as t,v as a,r as o,x as u,y as i,z as r,b as s,A as l,B as v,g as c}from"./aVp2OMsq.js";const d=""+new URL("bnk-logo-1.C-tvoZTz.svg",import.meta.url).href;function f(e){return!!u()&&(i(e),!0)}function p(n){return"function"==typeof n?n():e(n)}const g="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const m=()=>{};const w=g?window:void 0,y=g?window.navigator:void 0;function b(e){const n=function(){const e=o(!1),n=c();return n&&v((()=>{e.value=!0}),n),e}();return l((()=>(n.value,Boolean(e()))))}function h(e={}){const{interimResults:u=!0,continuous:i=!0,window:l=w}=e,v=function(...e){if(1!==e.length)return n(...e);const u=e[0];return"function"==typeof u?t(a((()=>({get:u,set:m})))):o(u)}(e.lang||"en-US"),c=o(!1),d=o(!1),g=o(""),y=r(void 0),h=l&&(l.SpeechRecognition||l.webkitSpeechRecognition),S=b((()=>h));let k;return S.value&&(k=new h,k.continuous=i,k.interimResults=u,k.lang=p(v),k.onstart=()=>{d.value=!1},s(v,(e=>{k&&!c.value&&(k.lang=e)})),k.onresult=e=>{const n=Array.from(e.results).map((e=>(d.value=e.isFinal,e[0]))).map((e=>e.transcript)).join("");g.value=n,y.value=void 0},k.onerror=e=>{y.value=e},k.onend=()=>{c.value=!1,k.lang=p(v)},s(c,(()=>{c.value?k.start():k.stop()}))),f((()=>{c.value=!1})),{isSupported:S,isListening:c,isFinal:d,recognition:k,result:g,error:y,toggle:(e=!c.value)=>{c.value=e},start:()=>{c.value=!0},stop:()=>{c.value=!1}}}function S(e={}){var n,t;const a=o(null!=(n=e.enabled)&&n),u=o(null==(t=e.autoSwitch)||t),i=o(e.constraints),{navigator:l=y}=e,v=b((()=>{var e;return null==(e=null==l?void 0:l.mediaDevices)?void 0:e.getUserMedia})),c=r();function d(e){switch(e){case"video":if(i.value)return i.value.video||!1;break;case"audio":if(i.value)return i.value.audio||!1}}async function p(){if(v.value&&!c.value)return c.value=await l.mediaDevices.getUserMedia({video:d("video"),audio:d("audio")}),c.value}function g(){var e;null==(e=c.value)||e.getTracks().forEach((e=>e.stop())),c.value=void 0}function m(){g(),a.value=!1}async function w(){return await p(),c.value&&(a.value=!0),c.value}async function h(){return g(),await w()}return s(a,(e=>{e?p():g()}),{immediate:!0}),s(i,(()=>{u.value&&c.value&&h()}),{immediate:!0}),f((()=>{m()})),{isSupported:v,stream:c,start:w,stop:m,restart:h,constraints:i,enabled:a,autoSwitch:u}}export{d as _,h as a,S as u};
